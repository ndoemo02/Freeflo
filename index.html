<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FreeFlow ‚Ä¢ Voice to order (demo)</title>
  <link rel="icon" href="./Freeflow-logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{ --text:#e9eef6; --muted:#93a1b4; --brand:#ff7a00; --card:#0f141b; --chip:#151b24; }
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text); background:#0b0f14 url("./Background.png") center/cover fixed no-repeat;
    }
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;position:sticky;top:0;z-index:50;
      background:linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.2), rgba(0,0,0,0));backdrop-filter: blur(3px);}
    .brand{display:flex;align-items:center;gap:10px;font-family:'Poppins',sans-serif;font-weight:700;font-size:26px}
    .brand img{width:36px;height:36px;border-radius:8px}
    .brand .accent{color:var(--brand)}
    .wrap{max-width:1040px;margin:0 auto;padding:0 16px 48px}
    h1{font-size:38px;margin:8px 0 6px}
    .sub{color:var(--muted);margin-bottom:10px}

    /* Tabs (miasta) */
    .tabs{display:flex;gap:10px;margin:8px 0 16px;flex-wrap:wrap}
    .tab{padding:10px 14px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:#0b1118;cursor:pointer}
    .tab.active{outline:2px solid #ff7a00aa;box-shadow:0 0 16px #ff7a0033 inset}

    /* Transcript bubble */
    .bubble{margin:10px 0 16px;padding:14px;border:1px solid rgba(255,255,255,.08);
      border-radius:14px;background:rgba(0,0,0,.18);box-shadow: inset 0 0 24px #0005}
    .mic{display:inline-grid;place-items:center;width:56px;height:56px;border-radius:14px;border:1px solid rgba(255,255,255,.08);
      background:#0b1118;cursor:pointer;margin-left:8px}

    /* Grid knajp */
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;margin-top:8px}
    @media (max-width:800px){ .grid{grid-template-columns:1fr} }
    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px;box-shadow:0 12px 30px #0006}
    .card h3{margin:0 0 4px;font-size:20px}
    .meta{color:var(--muted);font-size:13px;margin-bottom:10px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:var(--chip);border:1px solid rgba(255,255,255,.08);border-radius:999px;padding:8px 12px;font-size:14px;cursor:pointer}
    .chip:hover{transform:translateY(-1px)}

    .footer-note{color:var(--muted);font-size:12px;margin-top:16px}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand"><img src="./Freeflow-logo.png" alt="logo"/><span class="accent">Free</span>Flow</div>
    <div style="display:flex;align-items:center;gap:8px">
      <div id="transcript" class="bubble">Powiedz lub kliknij pozycjƒô z menu‚Ä¶</div>
      <button id="micBtn" class="mic" aria-label="Naci≈õnij, aby m√≥wiƒá">üéôÔ∏è</button>
    </div>
  </header>

  <main class="wrap">
    <h1>Zam√≥w g≈Çosem lub klikniƒôciem</h1>
    <div class="sub">Tryb testowy ‚Ä¢ Krak√≥w & Katowice ‚Ä¢ Bez zapisywania danych (poza wys≈Çaniem do NLU)</div>

    <!-- Zak≈Çadki miast -->
    <div class="tabs" id="cityTabs"></div>

    <!-- Siatka restauracji -->
    <div class="grid" id="restoGrid"></div>

    <div class="footer-note">
      Kliknij potrawƒô, a ja u≈Ço≈ºƒô komendƒô dla asystenta. Mikrofon ‚Äì je≈õli wolisz powiedzieƒá: ‚ÄûAriel, czulent dwie na 19:15, bez cebuli‚Äù.
    </div>
  </main>

  <!-- Dane (inline JSON, ≈ºeby na telefonie nie bawiƒá siƒô w pliki) -->
  <script id="restoData" type="application/json">
  {
    "Krak√≥w": [
      {
        "id": "krk-ariel",
        "name": "Ariel",
        "area": "Kazimierz",
        "cuisine": "≈ºydowska/galicyjska",
        "menu": ["Czulent","Tzimmes","Kugel","Karp po ≈ºydowsku","Pierogi z miƒôsem"]
      },
      {
        "id": "krk-klezmer",
        "name": "Klezmer Hois",
        "area": "Szeroka",
        "cuisine": "≈ºydowska",
        "menu": ["Czulent","Gƒô≈õ z jab≈Çkami","Kugel"]
      }
    ],
    "Katowice": [
      {
        "id": "ktw-napoli",
        "name": "Trattoria Napoli",
        "area": "Centrum",
        "cuisine": "w≈Çoska (test)",
        "menu": ["Margherita","Pepperoni","Carbonara","Capricciosa"]
      },
      {
        "id": "ktw-slaska",
        "name": "Z≈Çota ≈Åy≈ºka",
        "area": "≈ör√≥dmie≈õcie",
        "cuisine": "polska (test)",
        "menu": ["Schabowy","Pierogi ruskie","≈ªurek"]
      }
    ]
  }
  </script>

  <!-- Asystent -->
  <script src="./freeflow-assistant.js?v=ui1"></script>

  <!-- Render UI + akcje -->
  <script>
    // wczytaj dane
    const DATA = JSON.parse(document.getElementById('restoData').textContent);
    const $tabs = document.getElementById('cityTabs');
    const $grid = document.getElementById('restoGrid');
    const $bubble = document.getElementById('transcript');

    let currentCity = Object.keys(DATA)[0];

    function setBubble(t){ $bubble.textContent = t; }

    function renderTabs(){
      $tabs.innerHTML = '';
      Object.keys(DATA).forEach(city=>{
        const b = document.createElement('button');
        b.className = 'tab' + (city===currentCity?' active':'');
        b.textContent = city;
        b.onclick = ()=>{ currentCity = city; renderTabs(); renderGrid(); };
        $tabs.appendChild(b);
      });
    }

    function renderGrid(){
      $grid.innerHTML = '';
      (DATA[currentCity]||[]).forEach(r=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${r.name}</h3>
          <div class="meta">${currentCity} ‚Ä¢ ${r.area} ‚Ä¢ ${r.cuisine}</div>
          <div class="chips"></div>
        `;
        const chips = card.querySelector('.chips');
        r.menu.forEach(m=>{
          const c = document.createElement('button');
          c.className = 'chip';
          c.textContent = m;
          c.onclick = ()=>{
            const phrase = `${currentCity}, ${r.name}, ${m} jedna na 18:45`;
            setBubble(`üó£Ô∏è ${phrase}`);
            if (window.sendToAssistant) window.sendToAssistant(phrase);
          };
          chips.appendChild(c);
        });
        $grid.appendChild(card);
      });
    }

    renderTabs(); renderGrid();
  </script>
</body>
</html>
