<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FreeFlow – Voice to Order</title>

  <!-- Font zbliżony do stylu logotypu (script) -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0c0f;
      --panel:#111319;
      --text:#e9e9ec;
      --muted:#b9bdc7;
      --brand:#ff7a1a;
      --brand2:#ffb347;
      --glow: rgba(255,122,26,.45);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 800px at 50% -200px,#12141a 0%, var(--bg) 55%);
      color:var(--text); font-family:Inter,system-ui,Arial,Helvetica,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }

    .wrap{max-width:980px; margin:0 auto; padding:24px 20px 28dvh}

    /* Nagłówek */
    .brand{
      font-family:Pacifico, cursive;
      font-size: clamp(38px, 7.5vw, 82px);
      line-height: .95;
      letter-spacing:.5px;
      margin: 8px 0 6px;
      background: linear-gradient(180deg, var(--brand) 0%, var(--brand2) 100%);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 8px 28px rgba(255,122,26,.15);
      text-align:center;
    }
    .h1{font-size:clamp(24px,4.5vw,42px); font-weight:800; margin: 0 0 6px; text-align:center}
    .sub{color:var(--muted); font-size:clamp(14px,2.9vw,18px); text-align:center; margin:0 0 24px}

    /* Przycisk–logo (bez napisu) */
    .mic-btn{
      position:relative; border:none; background:transparent; outline:none; cursor:pointer;
      width:min(60vw, 360px); aspect-ratio:1/1; display:grid; place-items:center;
      margin: 18px auto 12px; filter: drop-shadow(0 18px 50px rgba(0,0,0,.5));
    }
    .mic-btn img{
      width:100%; height:100%; object-fit:contain; pointer-events:none; user-select:none;
      transition: transform .6s cubic-bezier(.2,.7,.2,1), filter .3s ease;
      filter: drop-shadow(0 0 0 rgba(255,122,26,0));
    }
    /* stan słuchania = puls + obrót + neonowa poświata */
    .mic-btn.listening img{
      animation: spin 6s linear infinite;
      filter: drop-shadow(0 0 18px var(--glow)) drop-shadow(0 0 48px rgba(255,122,26,.25));
    }
    @keyframes spin{ to{ transform: rotate(360deg) scale(1.02);} }

    .hint{
      text-align:center; color:#d9dde6; opacity:.9;
      font-size:clamp(14px,3.4vw,18px); margin: 2px 0 22px;
    }

    /* Kapsuła z podpowiedziami + transkrypt */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.06);
      border-radius:18px; padding:16px; max-width:900px; margin: 8px auto;
      box-shadow: 0 10px 30px rgba(0,0,0,.25) inset, 0 12px 40px rgba(0,0,0,.25);
    }
    .chips{display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin:4px 0 14px}
    .chip{
      padding:10px 14px; border-radius:14px; background:#12141a; color:#cfd5df;
      border:1px solid rgba(255,255,255,.08); font-size:15px;
    }
    .log{
      margin:6px auto 0; padding:14px 16px; border-radius:14px;
      background:#0e0f14; color:#dfe3ea; font-size:16px; line-height:1.5;
      border:1px solid rgba(255,255,255,.06);
    }

    /* Przyklejony wskaźnik stanu (3 kropki) */
    .dots{display:flex; justify-content:center; gap:10px; margin-top:10px}
    .dot{width:8px; height:8px; border-radius:999px; background:#2a2f38; opacity:.6}
    .dot.on{background:var(--brand); opacity:1; box-shadow: 0 0 16px var(--glow)}

    /* Responsywne odsunięcie, by treść nie zderzała się z krawędzią */
    @media (min-width:880px){ .wrap{padding-bottom:22dvh} }
  </style>
</head>
<body>
  <main class="wrap">
    <div class="brand">FreeFlow</div>
    <h1 class="h1">Złóż zamówienie</h1>
    <p class="sub">Taxi, posiłek, a może nocleg?</p>

    <!-- PRZYCISK: mikrofon bez napisu (sam orb) -->
    <button id="micBtn" class="mic-btn" aria-label="Naciśnij, aby mówić">
      <img src="mic-orb.png" alt="FreeFlow – mikrofon" />
    </button>
    <div class="hint" id="hint">Dotknij, aby mówić</div>

    <section class="card">
      <div class="chips">
        <span class="chip">„dwie pizze pepperoni”</span>
        <span class="chip">„zamów taxi na Dworzec”</span>
        <span class="chip">„hotel w Krakowie od piątku na 2 noce”</span>
      </div>
      <div class="log" id="log">Jeszcze nic nie nagrano.</div>
      <div class="dots"><span class="dot" id="d1"></span><span class="dot" id="d2"></span><span class="dot" id="d3"></span></div>
    </section>
  </main>

  <script>
    // --- Web Speech demo (rozpoznawanie + synteza) ---
    const micBtn = document.getElementById('micBtn');
    const hint   = document.getElementById('hint');
    const logEl  = document.getElementById('log');
    const dots   = [document.getElementById('d1'), document.getElementById('d2'), document.getElementById('d3')];

    let rec, listening = false, dotI = 0, dotTimer;

    function setDots(on){
      dots.forEach(d=>d.classList.remove('on'));
      if(on){ dots[dotI%3].classList.add('on'); dotI++; }
    }
    function startDots(){ stopDots(); dotTimer = setInterval(()=>setDots(true), 400); }
    function stopDots(){ clearInterval(dotTimer); dots.forEach(d=>d.classList.remove('on')); }

    function speak(text){
      try{
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'pl-PL'; u.rate = 1; u.pitch = 1;
        speechSynthesis.cancel(); speechSynthesis.speak(u);
      }catch(e){}
    }

    function ensureRecognizer(){
      if(rec) return rec;
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if(!SR){ logEl.textContent = 'Twoja przeglądarka nie obsługuje rozpoznawania mowy.'; return null; }
      rec = new SR();
      rec.lang = 'pl-PL'; rec.interimResults = false; rec.maxAlternatives = 1;
      rec.onresult = (e)=>{
        const text = e.results[0][0].transcript.trim();
        logEl.textContent = 'Ty: ' + text;
        // BARDZO PROSTY routing do odpowiedzi demo:
        let reply = 'Jasne! Co dokładnie podać?';
        const t = text.toLowerCase();
        if(t.includes('pizza') || t.includes('pizze')) reply = 'OK! Jakie rozmiary i z czym?';
        else if(t.includes('taxi')) reply = 'Zamawiam taxi. Skąd i dokąd jedziemy?';
        else if(t.includes('hotel')) reply = 'Szukam hotelu. Podaj miasto oraz daty przyjazdu i wyjazdu.';
        logEl.textContent += '\nAsystent: ' + reply;
        speak(reply);
      };
      rec.onstart = ()=>{
        listening = true;
        micBtn.classList.add('listening');
        hint.textContent = 'Słucham… mów teraz';
        startDots();
      };
      rec.onend = ()=>{
        listening = false;
        micBtn.classList.remove('listening');
        hint.textContent = 'Dotknij, aby mówić';
        stopDots();
      };
      rec.onerror = (e)=>{
        listening = false;
        micBtn.classList.remove('listening');
        hint.textContent = 'Błąd rozpoznawania. Spróbuj ponownie.';
        stopDots();
      };
      return rec;
    }

    micBtn.addEventListener('click', ()=>{
      const r = ensureRecognizer(); if(!r) return;
      if(listening){ r.stop(); return; }
      r.start();
    });

    // Tap na przykładowych chipach
    document.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{
        const text = ch.textContent.replace(/[„”]/g,'').trim();
        logEl.textContent = 'Ty: ' + text;
        speak('OK, ' + text);
      });
    });
  </script>
</body>
</html>
