<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FreeFlow – Voice Button Demo</title>
<style>
  :root{
    --bg:#0b0f14; --text:#e7edf6;
    --brand1:#ff7a1a; --brand2:#ff3c00; --glow:#ff7a1a;
    --size: 240px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; display:grid; place-items:center; gap:22px;
    background: radial-gradient(1200px 800px at 50% -10%, #111928 0%, #0a0e14 30%, var(--bg) 60%);
    color:var(--text); font:500 18px/1.35 Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    text-align:center; padding:22px;
  }
  h1{margin:0; font-weight:800; font-size:48px; letter-spacing:.3px;
     color:var(--brand1); text-shadow:0 8px 24px rgba(255,122,26,.18)}
  h2{margin:6px 0 18px; font-weight:700; font-size:32px}
  p.lead{margin:0 0 10px; opacity:.75}
  /* PRZYCISK */
  .mic-btn{
    position:relative; width:var(--size); height:var(--size);
    border:none; border-radius:999px; cursor:pointer; isolation:isolate;
    background: radial-gradient(60% 60% at 35% 30%, #1b2635 0%, #0d131c 70%) padding-box,
                conic-gradient(from 0deg, #ffb86b, #ff7a1a, #ff3c00, #ff7a1a, #ffb86b) border-box;
    box-shadow:
      inset 0 6px 18px rgba(255,255,255,.08),
      inset 0 -12px 28px rgba(0,0,0,.5),
      0 14px 28px rgba(0,0,0,.55),
      0 0 22px 6px rgba(255,122,26,.25);
    outline:none; -webkit-tap-highlight-color:transparent; overflow:hidden;
  }
  .mic-btn::after{
    content:""; position:absolute; inset:16%;
    background:url("./Freeflow-logo.png") center/contain no-repeat; /* <-- Twój plik */
    filter: drop-shadow(0 6px 18px rgba(255,122,26,.35));
    transition: transform .25s ease;
  }
  .mic-btn::before{
    content:""; position:absolute; inset:-35%;
    background: radial-gradient(60% 60% at 50% 50%, rgba(255,122,26,.28), transparent 60%);
    filter: blur(24px); z-index:-1; transition: opacity .3s ease;
  }
  .rings{ pointer-events:none; position:absolute; inset:0; border-radius:50% }
  .rings::before, .rings::after{
    content:""; position:absolute; inset:6%; border-radius:50%;
    border:2px solid rgba(255,122,26,.45);
    filter: blur(.3px) drop-shadow(0 0 8px rgba(255,122,26,.35));
    animation: ring 2.6s ease-out infinite;
  }
  .rings::after{ inset:14%; animation-delay:1.3s; opacity:.7}
  @keyframes ring{
    0%{transform:scale(.85); opacity:.85}
    70%{transform:scale(1.25); opacity:.08}
    100%{transform:scale(1.4); opacity:0}
  }
  .mic-btn.listening::after{ animation:spin 2.4s linear infinite }
  @keyframes spin{ to{ transform:rotate(360deg) } }
  .mic-btn:active{ transform: translateY(1px) scale(.99) }
  .mic-btn:hover::after{ transform:scale(1.02) }
  .mic-btn:hover::before{ opacity:1 }
  .hint{ margin-top:10px; font-size:14px; color:#ffbfa0; opacity:.8; animation: breathe 3.2s ease-in-out infinite }
  @keyframes breathe{ 0%,100%{opacity:.6} 50%{opacity:.98} }
  .log{
    width:min(720px, 100%); text-align:left; margin-top:8px;
    background:#0d131b; border:1px solid rgba(255,255,255,.06);
    box-shadow:0 6px 26px rgba(0,0,0,.45); border-radius:16px; padding:16px;
  }
  .bubble{
    display:inline-block; margin:8px 0; padding:12px 16px; border-radius:14px;
    background:#111a25; color:#dfe7f3; border:1px solid rgba(255,255,255,.06);
  }
  .me{ background:#0f1620; opacity:.9 }
  .as{ background:#14202d; border-color:rgba(255,122,26,.25) }
  @media (max-width:420px){ h1{font-size:40px} h2{font-size:28px} :root{--size:210px} }
  @media (prefers-reduced-motion:reduce){
    .rings,.mic-btn.listening::after,.hint{animation:none}
  }
</style>
</head>
<body>
  <header>
    <h1>FreeFlow</h1>
    <h2>Złóż zamówienie</h2>
    <p class="lead">Taxi, posiłek, a może nocleg?</p>
  </header>

  <button class="mic-btn" id="mic" aria-pressed="false" aria-label="Naciśnij, aby mówić">
    <span class="rings" aria-hidden="true"></span>
  </button>
  <div class="hint" id="hint">Naciśnij i mów: „dwie pizze pepperoni”, „zamów taxi…”, „hotel w Krakowie…”</div>

  <section class="log" id="log" aria-live="polite" aria-atomic="true">
    <div class="bubble as">Witaj! Kliknij przycisk i powiedz, czego potrzebujesz.</div>
  </section>

<script>
(() => {
  const mic = document.getElementById('mic');
  const log = document.getElementById('log');
  const hint = document.getElementById('hint');

  const speak = (txt) => {
    try{
      const u = new SpeechSynthesisUtterance(txt);
      u.lang = 'pl-PL';
      u.rate = 1.02; u.pitch = 1.0;
      speechSynthesis.cancel(); speechSynthesis.speak(u);
    }catch(e){}
  };
  const add = (txt, who='as') => {
    const b = document.createElement('div');
    b.className = `bubble ${who}`; b.textContent = txt;
    log.appendChild(b); log.scrollTop = log.scrollHeight;
  };

  let rec, listening = false;
  const supportsASR = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;

  const start = () => {
    if(!supportsASR){ add('Twoja przeglądarka nie wspiera rozpoznawania mowy.', 'as'); return; }
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    rec = new SR(); rec.lang = 'pl-PL'; rec.interimResults = false; rec.continuous = false;
    rec.onstart = () => { listening = true; mic.classList.add('listening'); mic.setAttribute('aria-pressed','true'); hint.textContent='Słucham…' };
    rec.onresult = (e) => {
      const txt = (e.results[0] && e.results[0][0] && e.results[0][0].transcript) || '';
      add('Ty: ' + txt, 'me'); respond(txt.toLowerCase());
    };
    rec.onerror = (e) => add('Błąd mikrofonu: ' + e.error, 'as');
    rec.onend = () => { listening = false; mic.classList.remove('listening'); mic.setAttribute('aria-pressed','false'); hint.textContent='Naciśnij i mów…' };
    rec.start();
  };
  const stop = () => { try{ rec && rec.stop(); }catch(e){} };

  function respond(t){
    let ans = 'Jasne, zapisałem.';
    if(t.includes('pizza') || t.includes('pizzę') || t.includes('pizze')){
      ans = 'Zamówienie na pizzę zanotowane. Jaki rozmiar i ile sztuk?';
    } else if(t.includes('taxi')){
      ans = 'Zamawiam taxi. Podaj adres startu i cel podróży.';
    } else if(t.includes('hotel')){
      ans = 'Szukam hotelu. Podaj miasto i daty przyjazdu oraz wyjazdu.';
    } else if(t.includes('anuluj') || t.includes('stop')){
      ans = 'Anulowano. Powiedz, gdy będziesz gotowy.';
    } else if(t.trim()===''){
      ans = 'Nie dosłyszałem. Powtórz proszę.';
    }
    add('Asystent: ' + ans, 'as'); speak(ans);
  }

  mic.addEventListener('click', () => listening ? stop() : start());
})();
</script>
</body>
</html>
