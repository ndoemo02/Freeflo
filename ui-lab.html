<!doctype html>
<html lang="pl" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>FreeFlow ‚Ä¢ UI Lab</title>
<meta name="color-scheme" content="dark light" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1016; --bg2:#0d141c; --panel:#0f141b; --muted:#9fb3c7; --text:#e8f0ff;
  --accent:#ff7a18; --accent-2:#ffb15a; --ring:rgba(255,122,24,.28);
  --stroke:#1b2734;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text); background:
   radial-gradient(80% 50% at 50% 0%, #101a24 0%, #0a0f15 70%) fixed;
  background-color:var(--bg);
}
a{color:inherit}

/* Layout */
.container{max-width:980px;margin:0 auto;padding:20px 16px 100px}
header{
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;padding:14px 0 6px;
}
.brand{display:flex;align-items:baseline;gap:14px}
.logo{
  font-weight:800;font-size:34px;letter-spacing:.5px;
  background:linear-gradient(180deg,#ffa34e,#ff6a00);
  -webkit-background-clip:text;background-clip:text;color:transparent;
  text-shadow:0 8px 30px #ff7a181a;
}
header small{color:#a9bed1;opacity:.9}

/* koszyk */
.cart{position:relative;background:#0f141b;border:1px solid #1e2a37;border-radius:16px;padding:10px 14px;box-shadow:0 10px 30px #0006}
.cart-badge{
  position:absolute;top:-8px;right:-6px;background:var(--accent);
  color:#111;padding:3px 6px;border-radius:999px;font-weight:800;font-size:12px
}

/* Tytu≈Çy */
h1{font-size:46px;line-height:1.05;margin:8px 0 6px}
.sub{color:#a3b8cc;margin-bottom:22px}

/* Logo + mic */
.logo-wrap{
  width:min(520px,88vw);aspect-ratio:1;border-radius:50%;
  margin:6px auto 16px;position:relative;display:grid;place-items:center;
  background:radial-gradient(120% 120% at 50% 50%, #141b24 0%, #0b1117 70%);
  box-shadow:inset 0 0 0 1px #1b2734, 0 40px 90px #000a;
}
.logo-wrap::before{
  content:"";position:absolute;inset:-10px;border-radius:50%;
  box-shadow:0 0 0 2px #223141, 0 0 80px #000 inset;
  mask: radial-gradient(circle at 50% 50%, #0000 58%, #000 60%);
  opacity:.7;
}
.logo-wrap img{width:72%;height:72%;object-fit:contain;filter:drop-shadow(0 20px 40px #000)}
.mic-cta{
  position:absolute;left:50%;bottom:16px;transform:translateX(-50%);
  background:#0f141b;border:1px solid #1f2a36;color:#cfe3ff;
  padding:12px 18px;border-radius:16px;display:flex;gap:10px;align-items:center;
  box-shadow:0 10px 40px #000a;user-select:none
}
.mic-cta .dot{width:10px;height:10px;border-radius:50%;background:#8aa7c7}

/* Live transcript w miejscu CTA */
.live{
  position:absolute;left:50%;bottom:16px;transform:translateX(-50%);
  min-width:60%;max-width:86%;padding:12px 16px;border-radius:16px;
  background:#0c1117;border:1px solid #263445;display:none;
  color:#eaf3ff;box-shadow:0 10px 40px #000c;
}
.live .caret{width:10px;height:16px;background:#ff7a18;display:inline-block;margin-left:4px;
  animation:blink .9s steps(1) infinite}
@keyframes blink{50%{opacity:0}}

/* Kategorie */
.pills{display:flex;gap:12px;justify-content:center;margin:10px 0 18px;flex-wrap:wrap}
.pill{
  display:flex;align-items:center;gap:10px;padding:14px 18px;border-radius:18px;
  background:#0c1117;border:1px solid var(--stroke);color:#d9e8f9;font-weight:600
}
.pill .ico{width:28px;height:28px;display:grid;place-items:center;border-radius:8px;background:#172131}

/* Przyk≈Çady */
.examples{
  max-width:820px;margin:0 auto;border:1px solid var(--stroke);
  background:rgba(12,17,23,.6);border-radius:20px;padding:8px 12px 6px
}
.bubble{
  margin:10px auto;padding:14px 18px;border-radius:14px;
  background:#0f151d;border:1px solid #223141;color:#cfe3ff;max-width:720px
}

/* numery wariant√≥w */
.variants{position:fixed;left:0;right:0;bottom:0;padding:8px;background:linear-gradient(#0000,#0008);backdrop-filter:blur(4px);display:flex;gap:10px;justify-content:center;z-index:50}
.variants button{
  width:44px;height:44px;border-radius:14px;border:1px solid #243243;background:#0f141b;color:#cfe3ff
}
.variants .active{background:#ff7a18;color:#111;border-color:#ff7a18;box-shadow:0 8px 26px #ff7a1833}

/* ==== MENU BTN + SHEET ==== */
.menu-btn{
  position:relative;width:54px;height:54px;border-radius:16px;
  border:1px solid #1f2a36;background:#151b23;color:#cfe3ff;
  display:grid;place-items:center;font-size:22px;box-shadow:0 8px 24px #0006
}
.menu-btn.pulse::after{
  content:"";position:absolute;inset:-4px;border-radius:16px;
  box-shadow:0 0 0 0 var(--ring);animation:menuPulse 1.8s ease-out infinite;
}
@keyframes menuPulse{0%{box-shadow:0 0 0 0 var(--ring)}100%{box-shadow:0 0 0 16px #0000}}

.sheet{position:fixed;inset:0;display:none;z-index:60}
.sheet.open{display:block}
.sheet .backdrop{position:absolute;inset:0;background:#0008;backdrop-filter:blur(3px)}
.sheet .panel{
  position:absolute;left:0;right:0;bottom:0;border-radius:24px 24px 0 0;
  background:#0f141b;border:1px solid #1e2a37;box-shadow:0 -20px 80px #000a;
  padding:16px 16px 24px;max-height:70vh;overflow:auto
}
.sheet .row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.sheet h3{margin:0;font-size:20px}
.sheet .close{background:#151b23;border:1px solid #223141;color:#cfe3ff;border-radius:12px;padding:8px 10px}
.menu-list{display:grid;gap:10px;margin-top:8px}
.menu-item{
  display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:14px;
  background:#0c1117;border:1px solid #1b2734;color:#e8f0ff;font-weight:600
}
.menu-item .ico{width:28px;height:28px;display:grid;place-items:center;border-radius:8px;background:#172131}

/* ==== FAB mic ‚Äì warianty 13/14 ==== */
.fab{
  position:fixed;right:18px;bottom:22px;z-index:55;display:none;
  width:64px;height:64px;border-radius:20px;border:1px solid #263445;
  background:radial-gradient(120% 120% at 50% 100%, #ff7a18 0%, #221a12 60%) padding-box,
             linear-gradient(180deg,#ff9a3c,#2b3a4e) border-box;
  color:#fff;display:grid;place-items:center;font-size:26px;
  box-shadow:0 20px 60px #000c, 0 0 24px #ff7a1833;
}
.fab.pulse::after{
  content:"";position:absolute;inset:-6px;border-radius:22px;
  box-shadow:0 0 0 0 rgba(255,122,24,.4);animation:fPulse 1.6s ease-out infinite;
}
@keyframes fPulse{to{box-shadow:0 0 0 18px transparent}}
.fab.listening{
  transform:scale(1.05) rotate(10deg);
  box-shadow:0 28px 80px #000c, 0 0 40px #ff7a18aa;
}

/* Ukryj du≈ºy CTA w wariantach 13/14 */
[data-variant="13"] .mic-cta,
[data-variant="14"] .mic-cta{display:none !important}
[data-variant="13"] .fab,
[data-variant="14"] .fab{display:grid}
</style>
</head>
<body data-variant="11">
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">FreeFlow</div>
        <small>Voice to order</small>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <button class="menu-btn pulse" id="menuBtn" aria-label="Menu">‚ò∞</button>
        <div class="cart" id="cartBtn" aria-label="Koszyk">
          üõí <div class="cart-badge" id="cartBadge">0</div>
        </div>
      </div>
    </header>

    <h1>Z≈Ç√≥≈º zam√≥wienie</h1>
    <div class="sub">Taxi, posi≈Çek, a mo≈ºe nocleg?</div>

    <!-- Logo + CTA / Live transcript -->
    <section class="logo-wrap" id="logoWrap" aria-live="polite">
      <img src="Freeflow-logo.png" alt="FreeFlow microfon">
      <button class="mic-cta" id="micCta">
        <span class="dot"></span> Dotknij, aby zam√≥wiƒá
      </button>
      <div class="live" id="liveBox">
        <strong>Nas≈Çuchujƒô‚Ä¶</strong>
        <span id="liveText"></span><span class="caret"></span>
      </div>
    </section>

    <!-- Kategorie -->
    <div class="pills">
      <button class="pill"><span class="ico">üçΩÔ∏è</span> Jedzenie</button>
      <button class="pill"><span class="ico">üöï</span> Taxi</button>
      <button class="pill"><span class="ico">üè®</span> Hotel</button>
    </div>

    <!-- Przyk≈Çadowe komendy -->
    <div class="examples">
      <div class="bubble">‚Äûdwie pizze pepperoni‚Äù</div>
      <div class="bubble">‚Äûzam√≥w taxi na Dworzec‚Äù</div>
      <div class="bubble">‚Äûhotel w Krakowie od piƒÖtku na 2 noce‚Äù</div>
    </div>
  </div>

  <!-- Bottom-sheet MENU -->
  <div class="sheet" id="mainMenu" aria-hidden="true">
    <div class="backdrop" id="menuBackdrop"></div>
    <div class="panel" role="dialog" aria-modal="true" aria-labelledby="menuTitle">
      <div class="row">
        <h3 id="menuTitle">Menu</h3>
        <button class="close" id="menuClose">Zamknij</button>
      </div>
      <div class="menu-list">
        <button class="menu-item"><span class="ico">üßæ</span> Zam√≥wienia</button>
        <button class="menu-item"><span class="ico">üõí</span> Koszyk</button>
        <button class="menu-item"><span class="ico">‚≠ê</span> Ulubione</button>
        <button class="menu-item"><span class="ico">üïì</span> Historia</button>
        <button class="menu-item"><span class="ico">üéõÔ∏è</span> Ustawienia</button>
        <button class="menu-item"><span class="ico">üåó</span> Motyw (ciemny/jasny)</button>
        <button class="menu-item"><span class="ico">üåê</span> Jƒôzyk</button>
        <button class="menu-item"><span class="ico">‚ùì</span> Pomoc i wsparcie</button>
      </div>
    </div>
  </div>

  <!-- FAB mic ‚Äì aktywny w #v13 / #v14 -->
  <button class="fab pulse" id="fabMic" aria-label="M√≥w teraz">üé§</button>

  <!-- Switcher wariant√≥w -->
  <div class="variants" role="navigation" aria-label="Wariant UI">
    <button data-v="11" class="active">11</button>
    <button data-v="12">12</button>
    <button data-v="13">13</button>
    <button data-v="14">14</button>
  </div>

<script>
/* ===== MENU sheet ===== */
const menuBtn = document.getElementById('menuBtn');
const sheetEl = document.getElementById('mainMenu');
const menuBackdrop = document.getElementById('menuBackdrop');
const menuClose = document.getElementById('menuClose');

function openMenu(){ sheetEl.classList.add('open'); sheetEl.setAttribute('aria-hidden','false'); }
function closeMenu(){ sheetEl.classList.remove('open'); sheetEl.setAttribute('aria-hidden','true'); }

menuBtn.addEventListener('click', openMenu);
menuBackdrop.addEventListener('click', closeMenu);
menuClose.addEventListener('click', closeMenu);
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });

function menuPulseOff(){ menuBtn.classList.remove('pulse'); }
function menuPulseOn(){ menuBtn.classList.add('pulse'); }

/* ===== Cart demo ===== */
const cartBadge = document.getElementById('cartBadge');
let cartCount = 0;
document.querySelectorAll('.pill').forEach(p=>p.addEventListener('click',()=>{
  cartCount = Math.min(9, cartCount+1);
  cartBadge.textContent = cartCount;
}));

/* ===== Speech / Live transcript ===== */
const micCta   = document.getElementById('micCta');
const liveBox  = document.getElementById('liveBox');
const liveText = document.getElementById('liveText');
const fab      = document.getElementById('fabMic');

let recognition = null;
let listening = false;

function setupRecognition(){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SR) return null;
  const r = new SR();
  r.lang = 'pl-PL';
  r.interimResults = true;
  r.continuous = false;
  r.maxAlternatives = 1;
  r.addEventListener('result',(ev)=>{
    let final=''; let interim='';
    for(const res of ev.results){
      if(res.isFinal) final += res[0].transcript;
      else interim += res[0].transcript;
    }
    liveText.textContent = final || interim || '';
  });
  r.addEventListener('start', onStart);
  r.addEventListener('end', onEnd);
  r.addEventListener('error', (e)=>{ console.warn('SR error', e.error); onEnd(); });
  return r;
}

function onStart(){
  listening = true;
  showLive(true);
  menuPulseOff();
  fab?.classList.add('listening');
}
function onEnd(){
  listening = false;
  showLive(false);
  fab?.classList.remove('listening');
  setTimeout(menuPulseOn, 4000);
}

function showLive(state){
  if(state){
    micCta.style.display='none';
    liveText.textContent = '';
    liveBox.style.display='block';
  }else{
    liveBox.style.display='none';
    micCta.style.display='flex';
  }
}

function startListening(){
  if(!recognition) recognition = setupRecognition();
  if(!recognition){ // brak wsparcia ‚Äì pokaz symulacjƒô
    onStart();
    let i=0; const faux = ["S≈Çucham‚Ä¶","proszƒô m√≥wiƒá"];
    const t = setInterval(()=>{ liveText.textContent = faux[i%faux.length]; i++; }, 500);
    setTimeout(()=>{ clearInterval(t); onEnd(); }, 3000);
    return;
  }
  try{ recognition.start(); }catch(e){/* already started */ }
}
function stopListening(){
  if(recognition && listening){ try{ recognition.stop(); }catch(e){} }
  else onEnd();
}

/* Klik CTA / FAB */
micCta.addEventListener('click', ()=>{
  if(!listening) startListening(); else stopListening();
});
fab.addEventListener('click', ()=>{
  if(!listening) startListening(); else stopListening();
});

/* ===== Warianty: #v11/#v12/#v13/#v14 ===== */
const vbar = document.querySelector('.variants');
function applyVariantFromHash(){
  const h = (location.hash||'').toLowerCase();
  const v = h.startsWith('#v') ? h.replace('#v','') : '11';
  document.body.dataset.variant = v;
  vbar.querySelectorAll('button').forEach(b=>{
    b.classList.toggle('active', b.dataset.v === v);
  });
  // FAB widoczny tylko w 13/14 (resztƒô robi CSS)
  if(v==='13' || v==='14'){ fab.style.display='grid'; } else { fab.style.display='none'; }
}
window.addEventListener('hashchange', applyVariantFromHash);
applyVariantFromHash();
vbar.addEventListener('click',(e)=>{
  const b = e.target.closest('button[data-v]'); if(!b) return;
  location.hash = '#v'+b.dataset.v;
});

/* Autogest ‚Äì przewiniƒôcie niepotrzebne, wszystko w zasiƒôgu kciuka */
</script>
</body>
</html>
