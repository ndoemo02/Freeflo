<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>FreeFlow ‚Äî zam√≥w g≈Çosem</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --fg:#e9eef6; --muted:#a8b3c7; --brand:#ff7a00;
      --glass-bg: rgba(0,0,0,.36); --glass-bd: rgba(255,255,255,.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,sans-serif;color:var(--fg);
      background:#0b0f14 url("assets/Background.png") center/cover fixed no-repeat;
    }
    .ff-header{display:flex;align-items:center;gap:12px;padding:16px;
      background:linear-gradient(180deg,rgba(0,0,0,.5),rgba(0,0,0,0))}
    .ff-title{font-weight:800;font-size:28px}
    .ff-title em{color:var(--brand);font-style:normal}
    .ff-sub{color:var(--muted);font-size:13px}
    .ff-spacer{flex:1}
    .ff-iconBtn{height:44px;width:44px;border-radius:14px;display:grid;place-items:center;
      background:var(--glass-bg);border:1px solid var(--glass-bd);backdrop-filter:blur(8px)}
    h1{margin:8px 16px 6px;font-size:34px}
    .lead{color:#c9d3e3;margin:0 16px 14px}
    .ff-hero{display:grid;place-items:center;margin:6px 0 18px}
    .logo{width:86%;max-width:520px;user-select:none;transition:transform .18s ease,filter .18s ease}
    .logo.listening{animation:ff-pulse 1.15s ease-in-out infinite}
    @keyframes ff-pulse{
      0%{transform:scale(1);filter:drop-shadow(0 0 0 rgba(255,122,0,0))}
      50%{transform:scale(1.05);filter:drop-shadow(0 0 20px rgba(255,122,0,.55))}
      100%{transform:scale(1);filter:drop-shadow(0 0 0 rgba(255,122,0,0))}
    }
    #transcript{position:fixed;left:16px;right:16px;
      bottom:calc(96px + max(16px, env(safe-area-inset-bottom)));
      z-index:40;padding:14px 16px;min-height:48px;color:var(--fg);font-size:16px;
      background:var(--glass-bg);border:1px solid var(--glass-bd);border-radius:16px;backdrop-filter:blur(8px)}
    .ff-bottom{position:fixed;left:16px;right:16px;bottom:max(16px,env(safe-area-inset-bottom));
      display:flex;gap:14px;z-index:30}
    .tile{flex:1;height:72px;border-radius:18px;display:flex;align-items:center;justify-content:center;gap:10px;
      background:var(--glass-bg);border:1px solid var(--glass-bd);backdrop-filter:blur(10px);font-weight:700}
    .tile.active{background:rgba(20,28,38,.46);outline:2px solid rgba(64,171,255,.55)}
    .summary{margin:6px 16px 20px;padding:16px;background:var(--glass-bg);
      border:1px solid var(--glass-bd);border-radius:16px;backdrop-filter:blur(8px)}
    .summary h2{margin:0 0 12px;font-size:18px}
    .summary ul{list-style:none;padding:0;margin:0}
    .summary li{margin:6px 0;font-size:15px;display:flex;align-items:center;gap:8px}
  </style>
</head>
<body>
  <header class="ff-header">
    <div>
      <div class="ff-title"><em>Free</em> Flow</div>
      <div class="ff-sub">Voice to order ‚Äî tryb testowy, bez profilowania</div>
    </div>
    <div class="ff-spacer"></div>
    <div class="ff-iconBtn" aria-label="Menu">‚â°</div>
    <div class="ff-iconBtn" aria-label="Koszyk">üõí</div>
  </header>

  <main>
    <h1>Z≈Ç√≥≈º zam√≥wienie</h1>
    <p class="lead">Jedzenie, Taxi albo nocleg ‚Äî powiedz lub kliknij.</p>
    <section class="ff-hero">
      <!-- logo bez obw√≥dki -->
      <img id="ffLogo" class="logo" src="assets/Freeflowlogo.png" alt="FreeFlow logo"/>
    </section>
  </main>

  <!-- Transkrypcja (sta≈Çe miejsce nad kafelkami) -->
  <div id="transcript">Powiedz, co chcesz zam√≥wiƒá‚Ä¶</div>

  <!-- Kafelki na dole, ka≈ºdy osobno (glass) -->
  <nav class="ff-bottom">
    <button id="btn-food" class="tile active">üçΩÔ∏è Jedzenie</button>
    <button id="btn-taxi" class="tile">üöï Taxi</button>
    <button id="btn-hotel" class="tile">üè° Hotel</button>
  </nav>

  <!-- Podsumowanie (pojawia siƒô po wyborze) -->
  <div class="summary" id="summaryBox" style="display:none;">
    <h2>Podsumowanie zam√≥wienia</h2>
    <ul id="summaryList"></ul>
  </div>

  <script>
    // ====== elementy ======
    const $logo = document.getElementById('ffLogo');
    const $t = document.getElementById('transcript');
    const $sumBox = document.getElementById('summaryBox');
    const $sumList = document.getElementById('summaryList');

    // ====== pomocnicze ======
    function setTranscript(txt){ $t.textContent = txt; }

    function addSummary(items){
      $sumList.innerHTML = "";
      items.forEach(i=>{
        const li = document.createElement('li');
        li.innerHTML = `${i.icon} ${i.text}`;
        $sumList.appendChild(li);
      });
      $sumBox.style.display = "block";

      // zbuduj zwiƒôz≈Çy tekst do TTS
      const plain = items.map(i => i.text).join(". ");
      speak(`Podsumowanie: ${plain}.`);
    }

    // ====== TTS (Web Speech API) ======
    function speak(text){
      try{
        if(!("speechSynthesis" in window)){
          // brak wsparcia ‚Äì poka≈º tylko tekst
          return;
        }
        // przerwij poprzednie czytanie, je≈ºeli trwa
        window.speechSynthesis.cancel();

        const u = new SpeechSynthesisUtterance(text);
        // PL g≈Ços (fallback na default)
        u.lang = "pl-PL";
        u.rate = 1.0;   // prƒôdko≈õƒá
        u.pitch = 1.0;  // ton
        u.volume = 1.0; // g≈Ço≈õno≈õƒá

        // spr√≥buj dobraƒá polski g≈Ços, je≈õli dostƒôpny
        const pickVoice = () => {
          const voices = window.speechSynthesis.getVoices() || [];
          const pl = voices.find(v => v.lang?.toLowerCase().startsWith("pl"));
          if(pl) u.voice = pl;
          window.speechSynthesis.speak(u);
        };
        // na czƒô≈õci przeglƒÖdarek lista g≈Ços√≥w ≈Çaduje siƒô asynchronicznie
        if (speechSynthesis.getVoices().length) {
          pickVoice();
        } else {
          speechSynthesis.onvoiceschanged = pickVoice;
        }
      }catch(e){
        // cicho ignoruj ‚Äì TTS jest dodatkiem
        console.warn("TTS error:", e);
      }
    }

    // ====== demo akcji kafelk√≥w ======
    document.getElementById('btn-food').onclick = () => {
      setTranscript("Zamawiam jedzenie‚Ä¶");
      addSummary([
        {icon:"‚úÖ",text:"Status: gotowe"},
        {icon:"üçï",text:"Capricciosa"},
        {icon:"üè®",text:"Miejsce: Demo Partner"},
        {icon:"‚è±",text:"Czas: 15‚Äì20 minut"},
        {icon:"üí≤",text:"Cena: 38 z≈Ç"}
      ]);
    };

    document.getElementById('btn-taxi').onclick = () => {
      setTranscript("Zamawiam taks√≥wkƒô‚Ä¶");
      addSummary([
        {icon:"‚úÖ",text:"Status: gotowe"},
        {icon:"üöï",text:"Taxi zam√≥wione"},
        {icon:"üìç",text:"Kierunek: Demo City"},
        {icon:"‚è±",text:"Czas podjazdu: oko≈Ço 5 minut"}
      ]);
    };

    document.getElementById('btn-hotel').onclick = () => {
      setTranscript("Rezerwujƒô hotel‚Ä¶");
      addSummary([
        {icon:"‚úÖ",text:"Status: gotowe"},
        {icon:"üè°",text:"Hotel Demo"},
        {icon:"‚è±",text:"D≈Çugo≈õƒá pobytu: 2 noce"},
        {icon:"üí≤",text:"Cena: 300 z≈Ç"}
      ]);
    };

    // ====== klik logo ‚Üí efekt nas≈Çuchu (wizualny) ======
    let listening = false;
    $logo.onclick = () => {
      listening = !listening;
      $logo.classList.toggle("listening", listening);
      setTranscript(listening ? "S≈Çucham‚Ä¶" : "Powiedz, co chcesz zam√≥wiƒá‚Ä¶");
      // (Tu p√≥≈∫niej podepniemy realny STT)
    };
  </script>
</body>
</html>
